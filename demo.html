<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Capsule Quiz Master</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Your existing CSS stays here - I've kept it minimal for the template */
        :root{--primary:#667eea;--primary-dark:#5568d3;--secondary:#764ba2;--success:#48bb78;--danger:#f5576c;--warning:#fbbf24;--info:#4facfe;--bg-light:#f7fafc;--bg-white:#fff;--text-dark:#1a202c;--text-light:#718096;--border:#e2e8f0}
        [data-theme="dark"]{--bg-light:#1a202c;--bg-white:#2d3748;--text-dark:#f7fafc;--text-light:#cbd5e0;--border:#4a5568}
        body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);min-height:100vh;margin:0;overflow:hidden;}
        /* ... (Paste your full CSS here) ... */
    </style>
</head>
<body>

<div id="modeSelection">
    <div class="mode-container">
        <div class="mode-header">
            <div class="mode-header-icon"><i class="fas fa-graduation-cap"></i></div>
            <h2>Capsule Quiz</h2>
            <p>Choose your preferred test mode</p>
        </div>
        <div class="mode-cards">
            <div class="mode-card exam-mode" data-mode="exam">
                <div class="mode-card-header">
                    <div class="mode-icon"><i class="fas fa-file-alt"></i></div>
                    <div class="mode-info"><h3>Exam Mode</h3><p>Results shown after submission</p></div>
                </div>
            </div>
            <div class="mode-card practice-mode" data-mode="practice">
                <div class="mode-card-header">
                    <div class="mode-icon"><i class="fas fa-book-open"></i></div>
                    <div class="mode-info"><h3>Practice Mode</h3><p>Instant feedback & explanations</p></div>
                </div>
            </div>
        </div>
        <div class="timer-config">
            <label for="ct"><i class="fas fa-clock"></i> Custom Timer (minutes)</label>
            <input type="number" id="ct" class="timer-input" placeholder="Default: 25 minutes">
        </div>
        <button class="start-btn" id="sb" disabled><i class="fas fa-play-circle"></i><span>Start Quiz</span></button>
    </div>
</div>

<div id="quizContainer" style="display:none;">
    </div>

<div id="customConfirm" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:10000; align-items:center; justify-content:center; padding:20px; backdrop-filter: blur(5px);">
    <div class="mode-container" style="max-width:400px; padding:30px; text-align:center; background:var(--bg-white);">
        <div class="mode-header-icon" style="background:var(--warning); width:60px; height:60px; font-size:30px; margin: 0 auto 15px auto; color:#fff; display:flex; align-items:center; justify-content:center; border-radius:15px;">
            <i class="fas fa-question-circle"></i>
        </div>
        <h2 style="color:var(--text-dark); margin-bottom:10px;">Submit Quiz?</h2>
        <p id="confirmMsg" style="color:var(--text-light); margin-bottom:25px; font-size:14px;"></p>
        <div style="display:flex; gap:12px;">
            <button onclick="closeConfirm()" class="nav-btn secondary" style="flex:1; cursor:pointer; padding:12px; border-radius:10px; border:1px solid var(--border);">Cancel</button>
            <button onclick="finalSubmit()" class="nav-btn primary" style="flex:1; cursor:pointer; padding:12px; border-radius:10px; background:var(--primary); color:#fff; border:none;">Submit</button>
        </div>
    </div>
</div>

<script>
// --- QUIZ DATA CONFIGURATION ---
const qd = {
    tt: 1500, // Time in seconds
    nm: 0.25, // Negative marks
    m: 'exam',
    q: [
        // START QUESTION 1
        {
            id: 0,
            txt: "Which of the following is used as an opacifying agent in capsule shells?",
            ref: "Pharmaceutics Ref: Vol 1",
            opts: ["Methyl paraben", "Sorbitol", "Titanium dioxide", "Gelatin"],
            ci: 2,
            exp: "Titanium dioxide is used to make shells opaque."
        }, // END QUESTION 1
        
        // START QUESTION 2
        {
            id: 1,
            txt: "What is the standard storage temperature for capsules?",
            ref: "",
            opts: ["0-5°C", "15-25°C", "40-50°C", "Above 60°C"],
            ci: 1,
            exp: "Capsules should be stored in a cool, dry place, typically between 15-25°C."
        } // END QUESTION 2
    ]
};

// --- APP STATE ---
let st = {
    cq: 0,
    a: Array(qd.q.length).fill(null),
    mk: Array(qd.q.length).fill(false),
    tr: qd.tt,
    ti: null,
    sb: false,
    rv: false,
    th: 'light'
};

// --- FUNCTIONS ---

// Replacement for window.confirm
function cs() {
    const u = st.a.filter(a => a === null).length;
    document.getElementById('confirmMsg').textContent = u > 0 
        ? `You have ${u} unattempted questions. Submit anyway?` 
        : "All questions answered. Ready to see results?";
    document.getElementById('customConfirm').style.display = 'flex';
}

function closeConfirm() {
    document.getElementById('customConfirm').style.display = 'none';
}

function finalSubmit() {
    closeConfirm();
    sbq(); // Your scoring logic
}

// Add the rest of your logic functions (sms, sq, iq, rq, etc.) here...

</script>
</body>
</html>
